.syntax unified
.section .text

enableApb2BusClock:
  LDR r1,=RCC_APB2ENR
  LDR r2,[r1]
  MOV r0,#1
  LSL r0,#2
  ORR r0,r0,r2
  STR r0,[r1]
  BX lr

setupSysTick:
  LDR r1,=STK_CTRL
  EOR r2,r2
  STR r2,[r1]
  LDR r1,=STK_LOAD
  LDR r0,=DOT_DELAY
  STR r0,[r1]
  LDR r1,=STK_VAL
  EOR r2,r2
  STR r2,[r1]
  LDR r1,=STK_CTRL
  MOV r2,#7
  STR r2,[r1]
  BX lr

//Set PA5 pin to Output mode
setupPa5Pin:
  LDR r1,=GPIOA_CRL
  LDR r2,[r1]
  MOV r0,#1
  LSL r0,#20
  ORR r0,r0,r2
  MOV r2,#1
  LSL r2,#22
  EOR r0,r0,r2
  STR r0,[r1]
  BX lr

createMorseArray:
  LDR r0,=LETTER_ADDRESSES  
  LDR r1,=A
  STR r1,[r0]
  ADD r0,#4
  LDR r1,=B
  STR r1,[r0]
  ADD r0,#4
  LDR r1,=C
  STR r1,[r0]
  ADD r0,#4
  LDR r1,=D
  STR r1,[r0]
  ADD r0,#4
  LDR r1,=E
  STR r1,[r0]
  ADD r0,#4
  LDR r1,=F
  STR r1,[r0]
  ADD r0,#4
  LDR r1,=G
  STR r1,[r0]
  ADD r0,#4
  LDR r1,=H
  STR r1,[r0]
  ADD r0,#4
  LDR r1,=I
  STR r1,[r0]
  ADD r0,#4
  LDR r1,=J
  STR r1,[r0]
  ADD r0,#4
  LDR r1,=K
  STR r1,[r0]
  ADD r0,#4
  LDR r1,=L
  STR r1,[r0]
  ADD r0,#4
  LDR r1,=M
  STR r1,[r0]
  ADD r0,#4
  LDR r1,=N
  STR r1,[r0]
  ADD r0,#4
  LDR r1,=O
  STR r1,[r0]
  ADD r0,#4
  LDR r1,=P
  STR r1,[r0]
  ADD r0,#4
  LDR r1,=Q
  STR r1,[r0]
  ADD r0,#4
  LDR r1,=R
  STR r1,[r0]
  ADD r0,#4
  LDR r1,=S
  STR r1,[r0]
  ADD r0,#4
  LDR r1,=T
  STR r1,[r0]
  ADD r0,#4
  LDR r1,=U
  STR r1,[r0]
  ADD r0,#4
  LDR r1,=V
  STR r1,[r0]
  ADD r0,#4
  LDR r1,=W
  STR r1,[r0]
  ADD r0,#4
  LDR r1,=X
  STR r1,[r0]
  ADD r0,#4
  LDR r1,=Y
  STR r1,[r0]
  ADD r0,#4
  LDR r1,=Z
  STR r1,[r0]
  ADD r0,#4
  BX lr
